\hypertarget{class_c_script_compressor}{}\section{C\+Script\+Compressor Class Reference}
\label{class_c_script_compressor}\index{C\+Script\+Compressor@{C\+Script\+Compressor}}


{\ttfamily \#include $<$compressor.\+h$>$}

\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{class_c_script_compressor_aad31afe3d14387b163b5c043e834ca2b}{C\+Script\+Compressor}} (C\+Script \&script\+In)
\item 
unsigned int \mbox{\hyperlink{class_c_script_compressor_afd6f2bea6c0ba2d34f770997e96bc23d}{Get\+Serialize\+Size}} (int n\+Type, int n\+Version) const
\item 
{\footnotesize template$<$typename Stream $>$ }\\void \mbox{\hyperlink{class_c_script_compressor_a5702b644df500ddd11c56d0490e8be44}{Serialize}} (Stream \&s, int n\+Type, int n\+Version) const
\item 
{\footnotesize template$<$typename Stream $>$ }\\void \mbox{\hyperlink{class_c_script_compressor_a016fa6e3d2735d95fcf773271da073d5}{Unserialize}} (Stream \&s, int n\+Type, int n\+Version)
\end{DoxyCompactItemize}
\subsection*{Protected Member Functions}
\begin{DoxyCompactItemize}
\item 
bool \mbox{\hyperlink{class_c_script_compressor_a38e2dcfce62bb157b55536d73748f556}{Is\+To\+Key\+ID}} (\mbox{\hyperlink{class_c_key_i_d}{C\+Key\+ID}} \&hash) const
\item 
bool \mbox{\hyperlink{class_c_script_compressor_a7a995d1064299a58d4f2e9f0ac205d07}{Is\+To\+Script\+ID}} (C\+Script\+ID \&hash) const
\item 
bool \mbox{\hyperlink{class_c_script_compressor_a19a67455a106e2e0528bc97cb60d2391}{Is\+To\+Pub\+Key}} (\mbox{\hyperlink{class_c_pub_key}{C\+Pub\+Key}} \&pubkey) const
\item 
bool \mbox{\hyperlink{class_c_script_compressor_a563ba251e7720841b4d5fc30ebd736e6}{Compress}} (std\+::vector$<$ unsigned char $>$ \&out) const
\item 
unsigned int \mbox{\hyperlink{class_c_script_compressor_aa702c1ed206804d016da3600e02d2169}{Get\+Special\+Size}} (unsigned int n\+Size) const
\item 
bool \mbox{\hyperlink{class_c_script_compressor_a1feb663ddab3a45218c7cb02f2a25717}{Decompress}} (unsigned int n\+Size, const std\+::vector$<$ unsigned char $>$ \&out)
\end{DoxyCompactItemize}
\subsection*{Private Attributes}
\begin{DoxyCompactItemize}
\item 
C\+Script \& \mbox{\hyperlink{class_c_script_compressor_afb1c3fb4b9ff4870501705c030cef056}{script}}
\end{DoxyCompactItemize}
\subsection*{Static Private Attributes}
\begin{DoxyCompactItemize}
\item 
static const unsigned int \mbox{\hyperlink{class_c_script_compressor_a3f0dc2a613a667745ee24a476ce21337}{n\+Special\+Scripts}} = 6
\end{DoxyCompactItemize}


\subsection{Detailed Description}
Compact serializer for scripts.

It detects common cases and encodes them much more efficiently. 3 special cases are defined\+:
\begin{DoxyItemize}
\item Pay to pubkey hash (encoded as 21 bytes)
\item Pay to script hash (encoded as 21 bytes)
\item Pay to pubkey starting with 0x02, 0x03 or 0x04 (encoded as 33 bytes)
\end{DoxyItemize}

Other scripts up to 121 bytes require 1 byte + script length. Above that, scripts up to 16505 bytes require 2 bytes + script length. 

\subsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{class_c_script_compressor_aad31afe3d14387b163b5c043e834ca2b}\label{class_c_script_compressor_aad31afe3d14387b163b5c043e834ca2b}} 
\index{C\+Script\+Compressor@{C\+Script\+Compressor}!C\+Script\+Compressor@{C\+Script\+Compressor}}
\index{C\+Script\+Compressor@{C\+Script\+Compressor}!C\+Script\+Compressor@{C\+Script\+Compressor}}
\subsubsection{\texorpdfstring{C\+Script\+Compressor()}{CScriptCompressor()}}
{\footnotesize\ttfamily C\+Script\+Compressor\+::\+C\+Script\+Compressor (\begin{DoxyParamCaption}\item[{C\+Script \&}]{script\+In }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



\subsection{Member Function Documentation}
\mbox{\Hypertarget{class_c_script_compressor_a563ba251e7720841b4d5fc30ebd736e6}\label{class_c_script_compressor_a563ba251e7720841b4d5fc30ebd736e6}} 
\index{C\+Script\+Compressor@{C\+Script\+Compressor}!Compress@{Compress}}
\index{Compress@{Compress}!C\+Script\+Compressor@{C\+Script\+Compressor}}
\subsubsection{\texorpdfstring{Compress()}{Compress()}}
{\footnotesize\ttfamily bool C\+Script\+Compressor\+::\+Compress (\begin{DoxyParamCaption}\item[{std\+::vector$<$ unsigned char $>$ \&}]{out }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [protected]}}

\mbox{\Hypertarget{class_c_script_compressor_a1feb663ddab3a45218c7cb02f2a25717}\label{class_c_script_compressor_a1feb663ddab3a45218c7cb02f2a25717}} 
\index{C\+Script\+Compressor@{C\+Script\+Compressor}!Decompress@{Decompress}}
\index{Decompress@{Decompress}!C\+Script\+Compressor@{C\+Script\+Compressor}}
\subsubsection{\texorpdfstring{Decompress()}{Decompress()}}
{\footnotesize\ttfamily bool C\+Script\+Compressor\+::\+Decompress (\begin{DoxyParamCaption}\item[{unsigned int}]{n\+Size,  }\item[{const std\+::vector$<$ unsigned char $>$ \&}]{out }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}}

\mbox{\Hypertarget{class_c_script_compressor_afd6f2bea6c0ba2d34f770997e96bc23d}\label{class_c_script_compressor_afd6f2bea6c0ba2d34f770997e96bc23d}} 
\index{C\+Script\+Compressor@{C\+Script\+Compressor}!Get\+Serialize\+Size@{Get\+Serialize\+Size}}
\index{Get\+Serialize\+Size@{Get\+Serialize\+Size}!C\+Script\+Compressor@{C\+Script\+Compressor}}
\subsubsection{\texorpdfstring{Get\+Serialize\+Size()}{GetSerializeSize()}}
{\footnotesize\ttfamily unsigned int C\+Script\+Compressor\+::\+Get\+Serialize\+Size (\begin{DoxyParamCaption}\item[{int}]{n\+Type,  }\item[{int}]{n\+Version }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}

\mbox{\Hypertarget{class_c_script_compressor_aa702c1ed206804d016da3600e02d2169}\label{class_c_script_compressor_aa702c1ed206804d016da3600e02d2169}} 
\index{C\+Script\+Compressor@{C\+Script\+Compressor}!Get\+Special\+Size@{Get\+Special\+Size}}
\index{Get\+Special\+Size@{Get\+Special\+Size}!C\+Script\+Compressor@{C\+Script\+Compressor}}
\subsubsection{\texorpdfstring{Get\+Special\+Size()}{GetSpecialSize()}}
{\footnotesize\ttfamily unsigned int C\+Script\+Compressor\+::\+Get\+Special\+Size (\begin{DoxyParamCaption}\item[{unsigned int}]{n\+Size }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [protected]}}

\mbox{\Hypertarget{class_c_script_compressor_a38e2dcfce62bb157b55536d73748f556}\label{class_c_script_compressor_a38e2dcfce62bb157b55536d73748f556}} 
\index{C\+Script\+Compressor@{C\+Script\+Compressor}!Is\+To\+Key\+ID@{Is\+To\+Key\+ID}}
\index{Is\+To\+Key\+ID@{Is\+To\+Key\+ID}!C\+Script\+Compressor@{C\+Script\+Compressor}}
\subsubsection{\texorpdfstring{Is\+To\+Key\+I\+D()}{IsToKeyID()}}
{\footnotesize\ttfamily bool C\+Script\+Compressor\+::\+Is\+To\+Key\+ID (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_c_key_i_d}{C\+Key\+ID}} \&}]{hash }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [protected]}}

These check for scripts for which a special case with a shorter encoding is defined. They are implemented separately from the C\+Script test, as these test for exact byte sequence correspondences, and are more strict. For example, Is\+To\+Pub\+Key also verifies whether the public key is valid (as invalid ones cannot be represented in compressed form). \mbox{\Hypertarget{class_c_script_compressor_a19a67455a106e2e0528bc97cb60d2391}\label{class_c_script_compressor_a19a67455a106e2e0528bc97cb60d2391}} 
\index{C\+Script\+Compressor@{C\+Script\+Compressor}!Is\+To\+Pub\+Key@{Is\+To\+Pub\+Key}}
\index{Is\+To\+Pub\+Key@{Is\+To\+Pub\+Key}!C\+Script\+Compressor@{C\+Script\+Compressor}}
\subsubsection{\texorpdfstring{Is\+To\+Pub\+Key()}{IsToPubKey()}}
{\footnotesize\ttfamily bool C\+Script\+Compressor\+::\+Is\+To\+Pub\+Key (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_c_pub_key}{C\+Pub\+Key}} \&}]{pubkey }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [protected]}}

\mbox{\Hypertarget{class_c_script_compressor_a7a995d1064299a58d4f2e9f0ac205d07}\label{class_c_script_compressor_a7a995d1064299a58d4f2e9f0ac205d07}} 
\index{C\+Script\+Compressor@{C\+Script\+Compressor}!Is\+To\+Script\+ID@{Is\+To\+Script\+ID}}
\index{Is\+To\+Script\+ID@{Is\+To\+Script\+ID}!C\+Script\+Compressor@{C\+Script\+Compressor}}
\subsubsection{\texorpdfstring{Is\+To\+Script\+I\+D()}{IsToScriptID()}}
{\footnotesize\ttfamily bool C\+Script\+Compressor\+::\+Is\+To\+Script\+ID (\begin{DoxyParamCaption}\item[{C\+Script\+ID \&}]{hash }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [protected]}}

\mbox{\Hypertarget{class_c_script_compressor_a5702b644df500ddd11c56d0490e8be44}\label{class_c_script_compressor_a5702b644df500ddd11c56d0490e8be44}} 
\index{C\+Script\+Compressor@{C\+Script\+Compressor}!Serialize@{Serialize}}
\index{Serialize@{Serialize}!C\+Script\+Compressor@{C\+Script\+Compressor}}
\subsubsection{\texorpdfstring{Serialize()}{Serialize()}}
{\footnotesize\ttfamily template$<$typename Stream $>$ \\
void C\+Script\+Compressor\+::\+Serialize (\begin{DoxyParamCaption}\item[{Stream \&}]{s,  }\item[{int}]{n\+Type,  }\item[{int}]{n\+Version }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}

\mbox{\Hypertarget{class_c_script_compressor_a016fa6e3d2735d95fcf773271da073d5}\label{class_c_script_compressor_a016fa6e3d2735d95fcf773271da073d5}} 
\index{C\+Script\+Compressor@{C\+Script\+Compressor}!Unserialize@{Unserialize}}
\index{Unserialize@{Unserialize}!C\+Script\+Compressor@{C\+Script\+Compressor}}
\subsubsection{\texorpdfstring{Unserialize()}{Unserialize()}}
{\footnotesize\ttfamily template$<$typename Stream $>$ \\
void C\+Script\+Compressor\+::\+Unserialize (\begin{DoxyParamCaption}\item[{Stream \&}]{s,  }\item[{int}]{n\+Type,  }\item[{int}]{n\+Version }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



\subsection{Member Data Documentation}
\mbox{\Hypertarget{class_c_script_compressor_a3f0dc2a613a667745ee24a476ce21337}\label{class_c_script_compressor_a3f0dc2a613a667745ee24a476ce21337}} 
\index{C\+Script\+Compressor@{C\+Script\+Compressor}!n\+Special\+Scripts@{n\+Special\+Scripts}}
\index{n\+Special\+Scripts@{n\+Special\+Scripts}!C\+Script\+Compressor@{C\+Script\+Compressor}}
\subsubsection{\texorpdfstring{n\+Special\+Scripts}{nSpecialScripts}}
{\footnotesize\ttfamily const unsigned int C\+Script\+Compressor\+::n\+Special\+Scripts = 6\hspace{0.3cm}{\ttfamily [static]}, {\ttfamily [private]}}

make this static for now (there are only 6 special scripts defined) this can potentially be extended together with a new n\+Version for transactions, in which case this value becomes dependent on n\+Version and n\+Height of the enclosing transaction. \mbox{\Hypertarget{class_c_script_compressor_afb1c3fb4b9ff4870501705c030cef056}\label{class_c_script_compressor_afb1c3fb4b9ff4870501705c030cef056}} 
\index{C\+Script\+Compressor@{C\+Script\+Compressor}!script@{script}}
\index{script@{script}!C\+Script\+Compressor@{C\+Script\+Compressor}}
\subsubsection{\texorpdfstring{script}{script}}
{\footnotesize\ttfamily C\+Script\& C\+Script\+Compressor\+::script\hspace{0.3cm}{\ttfamily [private]}}



The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
/\+Users/christopherarguello/\+Developer/anon/src/\mbox{\hyperlink{compressor_8h}{compressor.\+h}}\item 
/\+Users/christopherarguello/\+Developer/anon/src/\mbox{\hyperlink{compressor_8cpp}{compressor.\+cpp}}\end{DoxyCompactItemize}
