\hypertarget{key_8cpp}{}\section{/\+Users/christopherarguello/\+Developer/anon/src/key.cpp File Reference}
\label{key_8cpp}\index{/\+Users/christopherarguello/\+Developer/anon/src/key.\+cpp@{/\+Users/christopherarguello/\+Developer/anon/src/key.\+cpp}}
{\ttfamily \#include \char`\"{}key.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}arith\+\_\+uint256.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}crypto/common.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}crypto/hmac\+\_\+sha512.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}pubkey.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}random.\+h\char`\"{}}\newline
{\ttfamily \#include $<$secp256k1.\+h$>$}\newline
{\ttfamily \#include $<$secp256k1\+\_\+recovery.\+h$>$}\newline
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
static int \mbox{\hyperlink{key_8cpp_a4b55d97662f6589a6319c363469c501e}{ec\+\_\+privkey\+\_\+import\+\_\+der}} (const secp256k1\+\_\+context $\ast$ctx, unsigned char $\ast$out32, const unsigned char $\ast$privkey, size\+\_\+t privkeylen)
\item 
static int \mbox{\hyperlink{key_8cpp_a8cafc8a5eaf9a41f141e31d7c42ed7b9}{ec\+\_\+privkey\+\_\+export\+\_\+der}} (const secp256k1\+\_\+context $\ast$ctx, unsigned char $\ast$privkey, size\+\_\+t $\ast$privkeylen, const unsigned char $\ast$key32, int compressed)
\item 
bool \mbox{\hyperlink{key_8cpp_adc8d142f5bcd2ca6646462fb45a7945d}{E\+C\+C\+\_\+\+Init\+Sanity\+Check}} ()
\item 
void \mbox{\hyperlink{key_8cpp_ae4d2893f2f5af1cca247516578171860}{E\+C\+C\+\_\+\+Start}} ()
\item 
void \mbox{\hyperlink{key_8cpp_af3410be5ada18a4d8e9edcd3b0d261c9}{E\+C\+C\+\_\+\+Stop}} ()
\end{DoxyCompactItemize}
\subsection*{Variables}
\begin{DoxyCompactItemize}
\item 
static secp256k1\+\_\+context $\ast$ \mbox{\hyperlink{key_8cpp_aa353374fd6a64d469d7d2f3540f8ac76}{secp256k1\+\_\+context\+\_\+sign}} = N\+U\+LL
\end{DoxyCompactItemize}


\subsection{Function Documentation}
\mbox{\Hypertarget{key_8cpp_a8cafc8a5eaf9a41f141e31d7c42ed7b9}\label{key_8cpp_a8cafc8a5eaf9a41f141e31d7c42ed7b9}} 
\index{key.\+cpp@{key.\+cpp}!ec\+\_\+privkey\+\_\+export\+\_\+der@{ec\+\_\+privkey\+\_\+export\+\_\+der}}
\index{ec\+\_\+privkey\+\_\+export\+\_\+der@{ec\+\_\+privkey\+\_\+export\+\_\+der}!key.\+cpp@{key.\+cpp}}
\subsubsection{\texorpdfstring{ec\+\_\+privkey\+\_\+export\+\_\+der()}{ec\_privkey\_export\_der()}}
{\footnotesize\ttfamily static int ec\+\_\+privkey\+\_\+export\+\_\+der (\begin{DoxyParamCaption}\item[{const secp256k1\+\_\+context $\ast$}]{ctx,  }\item[{unsigned char $\ast$}]{privkey,  }\item[{size\+\_\+t $\ast$}]{privkeylen,  }\item[{const unsigned char $\ast$}]{key32,  }\item[{int}]{compressed }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}

This serializes to a D\+ER encoding of the E\+C\+Private\+Key type from section C.\+4 of S\+EC 1 \href{http://www.secg.org/sec1-v2.pdf}{\tt http\+://www.\+secg.\+org/sec1-\/v2.\+pdf}. The optional parameters and public\+Key fields are included.

privkey must point to an output buffer of length at least P\+R\+I\+V\+A\+T\+E\+\_\+\+K\+E\+Y\+\_\+\+S\+I\+ZE bytes. privkeylen must initially be set to the size of the privkey buffer. Upon return it will be set to the number of bytes used in the buffer. key32 must point to a 32-\/byte raw private key. \mbox{\Hypertarget{key_8cpp_a4b55d97662f6589a6319c363469c501e}\label{key_8cpp_a4b55d97662f6589a6319c363469c501e}} 
\index{key.\+cpp@{key.\+cpp}!ec\+\_\+privkey\+\_\+import\+\_\+der@{ec\+\_\+privkey\+\_\+import\+\_\+der}}
\index{ec\+\_\+privkey\+\_\+import\+\_\+der@{ec\+\_\+privkey\+\_\+import\+\_\+der}!key.\+cpp@{key.\+cpp}}
\subsubsection{\texorpdfstring{ec\+\_\+privkey\+\_\+import\+\_\+der()}{ec\_privkey\_import\_der()}}
{\footnotesize\ttfamily static int ec\+\_\+privkey\+\_\+import\+\_\+der (\begin{DoxyParamCaption}\item[{const secp256k1\+\_\+context $\ast$}]{ctx,  }\item[{unsigned char $\ast$}]{out32,  }\item[{const unsigned char $\ast$}]{privkey,  }\item[{size\+\_\+t}]{privkeylen }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}

These functions are taken from the libsecp256k1 distribution and are very ugly. ~\newline
This parses a format loosely based on a D\+ER encoding of the E\+C\+Private\+Key type from section C.\+4 of S\+EC 1 \href{http://www.secg.org/sec1-v2.pdf}{\tt http\+://www.\+secg.\+org/sec1-\/v2.\+pdf}, with the following caveats\+:


\begin{DoxyItemize}
\item The octet-\/length of the S\+E\+Q\+U\+E\+N\+CE must be encoded as 1 or 2 octets. It is not required to be encoded as one octet if it is less than 256, as D\+ER would require.
\item The octet-\/length of the S\+E\+Q\+U\+E\+N\+CE must not be greater than the remaining length of the key encoding, but need not match it (i.\+e. the encoding may contain junk after the encoded S\+E\+Q\+U\+E\+N\+CE).
\item The private\+Key O\+C\+T\+ET S\+T\+R\+I\+NG is zero-\/filled on the left to 32 octets.
\item Anything after the encoding of the private\+Key O\+C\+T\+ET S\+T\+R\+I\+NG is ignored, whether or not it is validly encoded D\+ER.
\end{DoxyItemize}

out32 must point to an output buffer of length at least 32 bytes. \mbox{\Hypertarget{key_8cpp_adc8d142f5bcd2ca6646462fb45a7945d}\label{key_8cpp_adc8d142f5bcd2ca6646462fb45a7945d}} 
\index{key.\+cpp@{key.\+cpp}!E\+C\+C\+\_\+\+Init\+Sanity\+Check@{E\+C\+C\+\_\+\+Init\+Sanity\+Check}}
\index{E\+C\+C\+\_\+\+Init\+Sanity\+Check@{E\+C\+C\+\_\+\+Init\+Sanity\+Check}!key.\+cpp@{key.\+cpp}}
\subsubsection{\texorpdfstring{E\+C\+C\+\_\+\+Init\+Sanity\+Check()}{ECC\_InitSanityCheck()}}
{\footnotesize\ttfamily bool E\+C\+C\+\_\+\+Init\+Sanity\+Check (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}

Check that required EC support is available at runtime. \mbox{\Hypertarget{key_8cpp_ae4d2893f2f5af1cca247516578171860}\label{key_8cpp_ae4d2893f2f5af1cca247516578171860}} 
\index{key.\+cpp@{key.\+cpp}!E\+C\+C\+\_\+\+Start@{E\+C\+C\+\_\+\+Start}}
\index{E\+C\+C\+\_\+\+Start@{E\+C\+C\+\_\+\+Start}!key.\+cpp@{key.\+cpp}}
\subsubsection{\texorpdfstring{E\+C\+C\+\_\+\+Start()}{ECC\_Start()}}
{\footnotesize\ttfamily void E\+C\+C\+\_\+\+Start (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}

Initialize the elliptic curve support. May not be called twice without calling E\+C\+C\+\_\+\+Stop first. \mbox{\Hypertarget{key_8cpp_af3410be5ada18a4d8e9edcd3b0d261c9}\label{key_8cpp_af3410be5ada18a4d8e9edcd3b0d261c9}} 
\index{key.\+cpp@{key.\+cpp}!E\+C\+C\+\_\+\+Stop@{E\+C\+C\+\_\+\+Stop}}
\index{E\+C\+C\+\_\+\+Stop@{E\+C\+C\+\_\+\+Stop}!key.\+cpp@{key.\+cpp}}
\subsubsection{\texorpdfstring{E\+C\+C\+\_\+\+Stop()}{ECC\_Stop()}}
{\footnotesize\ttfamily void E\+C\+C\+\_\+\+Stop (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}

Deinitialize the elliptic curve support. No-\/op if E\+C\+C\+\_\+\+Start wasn\textquotesingle{}t called first. 

\subsection{Variable Documentation}
\mbox{\Hypertarget{key_8cpp_aa353374fd6a64d469d7d2f3540f8ac76}\label{key_8cpp_aa353374fd6a64d469d7d2f3540f8ac76}} 
\index{key.\+cpp@{key.\+cpp}!secp256k1\+\_\+context\+\_\+sign@{secp256k1\+\_\+context\+\_\+sign}}
\index{secp256k1\+\_\+context\+\_\+sign@{secp256k1\+\_\+context\+\_\+sign}!key.\+cpp@{key.\+cpp}}
\subsubsection{\texorpdfstring{secp256k1\+\_\+context\+\_\+sign}{secp256k1\_context\_sign}}
{\footnotesize\ttfamily secp256k1\+\_\+context$\ast$ secp256k1\+\_\+context\+\_\+sign = N\+U\+LL\hspace{0.3cm}{\ttfamily [static]}}

